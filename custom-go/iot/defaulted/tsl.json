{
  "schema": "https://iotx-tsl.oss-ap-southeast-1.aliyuncs.com/schema.json",
  "profile": {
    "version": "1.5",
    "productKey": ""
  },
  "properties": [
    {
      "identifier": "BatteryVoltage",
      "name": "电池电压",
      "accessMode": "r",
      "desc": "电池电压。单位为mv",
      "required": false,
      "dataType": {
        "type": "int",
        "specs": {
          "min": "0",
          "max": "80000",
          "unit": "mV",
          "unitName": "毫伏",
          "step": "1"
        }
      }
    },
    {
      "identifier": "NetState",
      "name": "设备信号强度",
      "accessMode": "r",
      "desc": "设备4G信号强度，单位dBm",
      "required": false,
      "dataType": {
        "type": "int",
        "specs": {
          "min": "0",
          "max": "100",
          "step": "1"
        }
      }
    },
    {
      "identifier": "FirmwareVersion",
      "name": "设备固件版本",
      "accessMode": "rw",
      "required": false,
      "dataType": {
        "type": "text",
        "specs": {
          "length": "64"
        }
      }
    },
    {
      "identifier": "RunningState",
      "name": "设备状态",
      "accessMode": "rw",
      "desc": "设备运行状态，2分钟上报1次\n后续把 开关状态、烟雾、红外、网络、电压、蓝牙绑定等都放在这里",
      "required": false,
      "dataType": {
        "type": "struct",
        "specs": [
          {
            "identifier": "bluetooth",
            "name": "蓝牙连接状态",
            "dataType": {
              "type": "bool",
              "specs": {
                "0": "未连接",
                "1": "已连接"
              }
            }
          }
        ]
      }
    }
  ],
  "events": [
    {
      "identifier": "post",
      "name": "post",
      "type": "info",
      "required": true,
      "desc": "属性上报",
      "method": "thing.event.property.post",
      "outputData": [
        {
          "identifier": "BatteryVoltage",
          "name": "电池电压",
          "dataType": {
            "type": "int",
            "specs": {
              "min": "0",
              "max": "80000",
              "unit": "mV",
              "unitName": "毫伏",
              "step": "1"
            }
          }
        },
        {
          "identifier": "NetState",
          "name": "设备信号强度",
          "dataType": {
            "type": "int",
            "specs": {
              "min": "0",
              "max": "100",
              "step": "1"
            }
          }
        },
        {
          "identifier": "FirmwareVersion",
          "name": "设备固件版本",
          "dataType": {
            "type": "text",
            "specs": {
              "length": "64"
            }
          }
        },
        {
          "identifier": "RunningState",
          "name": "设备状态",
          "dataType": {
            "type": "struct",
            "specs": [
              {
                "identifier": "bluetooth",
                "name": "蓝牙连接状态",
                "dataType": {
                  "type": "bool",
                  "specs": {
                    "0": "未连接",
                    "1": "已连接"
                  }
                }
              }
            ]
          }
        }
      ]
    },
    {
      "identifier": "ErrorReport",
      "name": "故障上报",
      "type": "error",
      "required": false,
      "desc": "故障和故障恢复上报",
      "method": "thing.event.ErrorReport.post",
      "outputData": [
        {
          "identifier": "type",
          "name": "故障设备",
          "dataType": {
            "type": "enum",
            "specs": {
              "1": "电机故障"
            }
          }
        },
        {
          "identifier": "error",
          "name": "是故障还是故障恢复",
          "dataType": {
            "type": "bool",
            "specs": {
              "0": "恢复",
              "1": "触发"
            }
          }
        }
      ]
    },
    {
      "identifier": "LowBatteyEvent",
      "name": "电量低告警",
      "type": "alert",
      "required": false,
      "desc": "低电量告警\n\n电压低于阀值时触发，高于阀值时解除",
      "method": "thing.event.LowBatteyEvent.post",
      "outputData": [
        {
          "identifier": "BatteryLevel",
          "name": "电压",
          "dataType": {
            "type": "int",
            "specs": {
              "min": "0",
              "max": "100000",
              "step": "1"
            }
          }
        },
        {
          "identifier": "trigger",
          "name": "trigger",
          "dataType": {
            "type": "bool",
            "specs": {
              "0": "解除",
              "1": "触发"
            }
          }
        }
      ]
    }
  ],
  "services": [
    {
      "identifier": "set",
      "name": "set",
      "required": true,
      "callType": "async",
      "desc": "属性设置",
      "method": "thing.service.property.set",
      "inputData": [
        {
          "identifier": "FirmwareVersion",
          "name": "设备固件版本",
          "dataType": {
            "type": "text",
            "specs": {
              "length": "64"
            }
          }
        },
        {
          "identifier": "RunningState",
          "name": "设备状态",
          "dataType": {
            "type": "struct",
            "specs": [
              {
                "identifier": "bluetooth",
                "name": "蓝牙连接状态",
                "dataType": {
                  "type": "bool",
                  "specs": {
                    "0": "未连接",
                    "1": "已连接"
                  }
                }
              }
            ]
          }
        }
      ],
      "outputData": []
    },
    {
      "identifier": "get",
      "name": "get",
      "required": true,
      "callType": "async",
      "desc": "属性获取",
      "method": "thing.service.property.get",
      "inputData": [
        "BatteryVoltage",
        "NetState",
        "FirmwareVersion",
        "RunningState"
      ],
      "outputData": [
        {
          "identifier": "BatteryVoltage",
          "name": "电池电压",
          "dataType": {
            "type": "int",
            "specs": {
              "min": "0",
              "max": "80000",
              "unit": "mV",
              "unitName": "毫伏",
              "step": "1"
            }
          }
        },
        {
          "identifier": "NetState",
          "name": "设备信号强度",
          "dataType": {
            "type": "int",
            "specs": {
              "min": "0",
              "max": "100",
              "step": "1"
            }
          }
        },
        {
          "identifier": "FirmwareVersion",
          "name": "设备固件版本",
          "dataType": {
            "type": "text",
            "specs": {
              "length": "64"
            }
          }
        },
        {
          "identifier": "RunningState",
          "name": "设备状态",
          "dataType": {
            "type": "struct",
            "specs": [
              {
                "identifier": "bluetooth",
                "name": "蓝牙连接状态",
                "dataType": {
                  "type": "bool",
                  "specs": {
                    "0": "未连接",
                    "1": "已连接"
                  }
                }
              }
            ]
          }
        }
      ]
    },
    {
      "identifier": "ota",
      "name": "ota升级",
      "required": false,
      "callType": "sync",
      "desc": "ota升级",
      "method": "thing.service.ota",
      "inputData": [
        {
          "identifier": "aa",
          "name": "aa",
          "dataType": {
            "type": "int",
            "specs": {
              "min": "-2147483648",
              "max": "2147483647",
              "step": "1"
            }
          }
        },
        {
          "identifier": "bc",
          "name": "bc",
          "dataType": {
            "type": "double",
            "specs": {
              "min": "0",
              "max": "4294967295",
              "step": "1"
            }
          }
        },
        {
          "identifier": "bd",
          "name": "bd",
          "dataType": {
            "type": "text",
            "specs": {
              "length": "10240"
            }
          }
        },
        {
          "identifier": "bx",
          "name": "bx",
          "dataType": {
            "type": "int",
            "specs": {
              "min": "-2147483648",
              "max": "2147483647",
              "step": "1"
            }
          }
        },
        {
          "identifier": "ai",
          "name": "ai",
          "dataType": {
            "type": "text",
            "specs": {
              "length": "32"
            }
          }
        },
        {
          "identifier": "am",
          "name": "am",
          "dataType": {
            "type": "int",
            "specs": {
              "min": "-2147483648",
              "max": "2147483647",
              "step": "1"
            }
          }
        }
      ],
      "outputData": [
        {
          "identifier": "result",
          "name": "result",
          "dataType": {
            "type": "text",
            "specs": {
              "length": "10240"
            }
          }
        }
      ]
    },
    {
      "identifier": "Reboot",
      "name": "重启",
      "required": false,
      "callType": "sync",
      "desc": "特殊情况下，重启设备",
      "method": "thing.service.Reboot",
      "inputData": [],
      "outputData": [
        {
          "identifier": "result",
          "name": "result",
          "dataType": {
            "type": "text",
            "specs": {
              "length": "10240"
            }
          }
        }
      ]
    },
    {
      "identifier": "refreshProperties",
      "name": "主动请求设备上报属性",
      "required": false,
      "callType": "sync",
      "method": "thing.service.refreshProperties",
      "inputData": [
        {
          "identifier": "messageID",
          "name": "messageID",
          "dataType": {
            "type": "text",
            "specs": {
              "length": "10240"
            }
          }
        }
      ],
      "outputData": [
        {
          "identifier": "result",
          "name": "result",
          "dataType": {
            "type": "text",
            "specs": {
              "length": "10240"
            }
          }
        }
      ]
    },
    {
      "identifier": "bindBluetooth",
      "name": "蓝牙绑定/解绑",
      "required": false,
      "callType": "sync",
      "desc": "绑定蓝牙设备\n\nmac为空意味着解绑",
      "method": "thing.service.bindBluetooth",
      "inputData": [
        {
          "identifier": "mac",
          "name": "mac地址",
          "dataType": {
            "type": "text",
            "specs": {
              "length": "100"
            }
          }
        }
      ],
      "outputData": []
    }
  ],
  "functionBlocks": [
    {
      "functionBlockId": "config",
      "functionBlockName": "配置参数",
      "gmtCreated": 1631522243857,
      "productKey": "gbzlilCz6qq"
    }
  ]
}